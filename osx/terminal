# Disable MOTD in Terminal'
touch $HOME/.hushlogin

# Fix weird Terminal bug: https://github.com/neovim/neovim/issues/2048'
infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TERM.ti
tic $TERM.ti

# Set default terminal theme
osascript <<EOD
  tell application "Terminal"
    local allOpenedWindows
    local initialOpenedWindows
    local windowID
    set themeName to "Base16 Default Dark"
    set initialOpenedWindows to id of every window
    do shell script "open '$HOME/.dotfiles/osx/" & themeName & ".terminal'"
    do shell script "open '$HOME/.dotfiles/osx/Base16 Ocean Dark.terminal'"
    delay 1
    set default settings to settings set themeName
    set allOpenedWindows to id of every window
    repeat with windowID in allOpenedWindows
      if initialOpenedWindows does not contain windowID then
        close (every window whose id is windowID)
      else
        set current settings of tabs of (every window whose id is windowID) to settings set themeName
      end if
    end repeat
  end tell
EOD
